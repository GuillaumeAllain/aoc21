i←⊃⎕NGET'../data/day5' 1
n←(⍎)¨(↑⍣2)(','(≠⊆⊢)¨(1 0 1/⊢))¨' '(≠⊆⊢)¨i

t←(0×⊢⍴(⍳(×/⊢)))(1+⌈/[1]⌈/[2]n)
o←×/×-/[2]n

l←((1⌷⊢)(,¨⍥⍳)(2⌷⊢))¨↓1+|-/[2]n
lv←(0=o)/[1]⊢
lp←(0<o)/[1]⊢
lr←({(⌽@(⌽¨2,¨⍳1⌷⍴⍵))⍵}↑)¨(0>o)/⊢

c←{(⊢⊆)¨↓⌊/[2](0(⍎⍵)o)/[1]n}
v←(c'=')+lv
d←(((c'<')+lp ),((c'>')+lr))

s←{⍴⍸⊃~2>+/1∘.{(⍺@⍵)t}⍵}
s v l
s (d,v) l
